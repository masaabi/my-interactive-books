<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>دليل رائد الأعمال: من الفكرة إلى الشركة الناشئة</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
    
    <style>
        body {
            font-family: 'Cairo', sans-serif;
            background-color: #FDFBF5; /* Cream background */
            color: #2F4F4F; /* Dark Slate Gray text */
        }
        .accent-color {
            color: #2563EB;
        }
        .bg-accent-color {
            background-color: #2563EB;
        }
        .border-accent-color {
            border-color: #2563EB;
        }
        .nav-link.active {
            background-color: #2563EB;
            color: white;
            transform: scale(1.05);
        }
        .card {
            background-color: #FFFFFF;
            border-radius: 12px;
            padding: 24px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            transition: transform 0.3s, box-shadow 0.3s;
        }
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.12);
        }
        html {
            scroll-behavior: smooth;
        }
        .gemini-result h4, .model-message h4 {
            font-weight: bold;
            font-size: 1.1rem;
            margin-top: 1rem;
            color: #2563EB;
        }
        .gemini-result ul, .model-message ul {
            list-style-type: disc;
            margin-right: 1.5rem;
            margin-top: 0.5rem;
        }
        .gemini-result p, .model-message p {
            margin-top: 0.5rem;
        }
        .loader {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #2563EB;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        section h2 {
            border-right-width: 4px;
            border-color: #2563EB; /* border-accent-color */
            padding-right: 1rem;
        }
        section h3 {
            color: #1e3a8a; /* A darker blue */
        }
        .copy-btn {
            position: absolute;
            top: 0.5rem;
            left: 0.5rem;
            background-color: #e5e7eb;
            color: #4b5563;
            padding: 0.25rem 0.5rem;
            border-radius: 0.375rem;
            font-size: 0.75rem;
            font-family: sans-serif;
            border: none;
            cursor: pointer;
            transition: background-color 0.2s;
            z-index: 10;
        }
        .copy-btn:hover {
            background-color: #d1d5db;
        }
    </style>
</head>
<body class="flex">

    <!-- Sidebar Navigation -->
    <nav id="sidebar" class="fixed top-0 right-0 h-full bg-white shadow-lg w-64 p-5 transition-transform transform translate-x-full md:translate-x-0 z-40 overflow-y-auto">
        <div class="flex justify-between items-center mb-4">
            <h2 class="text-xl font-bold text-center accent-color">فهرس المحتويات</h2>
            <button id="close-menu-btn" class="md:hidden p-1">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>
            </button>
        </div>
        <ul class="space-y-2 text-sm">
            <li><a href="#intro" class="nav-link block w-full text-right py-2 px-3 rounded-lg transition-all duration-300 hover:bg-gray-100">مقدمة: رحلة بناء لا تنتهي</a></li>
            <li><a href="#business-clinic" class="nav-link block w-full text-right py-2 px-3 rounded-lg transition-all duration-300 hover:bg-gray-100 font-bold">🩺 عيادة الأعمال</a></li>
            <li><a href="#chapter1" class="nav-link block w-full text-right py-2 px-3 rounded-lg transition-all duration-300 hover:bg-gray-100">الفصل الأول: من الفكرة إلى نموذج العمل</a></li>
            <li><a href="#chapter2" class="nav-link block w-full text-right py-2 px-3 rounded-lg transition-all duration-300 hover:bg-gray-100">الفصل الثاني: بناء الفريق وتأسيس الشركة</a></li>
            <li><a href="#chapter3" class="nav-link block w-full text-right py-2 px-3 rounded-lg transition-all duration-300 hover:bg-gray-100">الفصل الثالث: التمويل والجولات الاستثمارية</a></li>
            <li><a href="#chapter4" class="nav-link block w-full text-right py-2 px-3 rounded-lg transition-all duration-300 hover:bg-gray-100">الفصل الرابع: من المنتج إلى السوق</a></li>
            <li><a href="#chapter5" class="nav-link block w-full text-right py-2 px-3 rounded-lg transition-all duration-300 hover:bg-gray-100">الفصل الخامس: القيادة والنمو المستدام</a></li>
            <li><a href="#chapter6" class="nav-link block w-full text-right py-2 px-3 rounded-lg transition-all duration-300 hover:bg-gray-100">الفصل السادس: صندوق الأدوات والمصادر</a></li>
            <li><a href="#appendix" class="nav-link block w-full text-right py-2 px-3 rounded-lg transition-all duration-300 hover:bg-gray-100">ملحق: لماذا نفقد الشغف في العمل؟</a></li>
        </ul>
    </nav>

    <!-- Mobile Menu Button -->
    <button id="menu-toggle" class="md:hidden fixed top-4 left-4 z-30 p-2 bg-accent-color text-white rounded-full shadow-lg">
        <svg id="menu-open-icon" xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7" /></svg>
    </button>
    
    <!-- Overlay for mobile menu -->
    <div id="overlay" class="md:hidden fixed inset-0 bg-black opacity-0 z-30 transition-opacity duration-300 hidden"></div>

    <!-- Main Content -->
    <main class="w-full pr-0 md:pr-64">
        <div class="p-4 sm:p-6 md:p-10">
            
            <header class="text-center mb-12 sm:mb-16">
                <h1 class="text-3xl sm:text-4xl md:text-5xl font-bold accent-color">دليل رائد الأعمال: من الفكرة إلى الشركة الناشئة</h1>
                <p class="mt-4 text-base sm:text-lg text-gray-600">م. وليد بن محمد المصعبي</p>
            </header>

            <section id="intro" class="mb-16 sm:mb-20">
                <h2 class="text-2xl md:text-3xl font-bold mb-6">مقدمة: رحلة بناء لا تنتهي</h2>
                <p class="text-base sm:text-lg text-gray-700 leading-relaxed">ريادة الأعمال ليست مجرد وظيفة، بل هي مغامرة بناء تتطلب أكثر من فكرة جيدة؛ إنها تحتاج إلى رؤية واضحة، تصميم لا يتزعزع، وقدرة فائقة على التكيف والتعلم. الطريق من فكرة أولية إلى شركة ناجحة مليء بالتحديات والمشتتات، والنجاح فيه حليف من يركز على حل المشاكل الحقيقية.</p>
                <p class="mt-4 text-base sm:text-lg text-gray-700 leading-relaxed">هذا الدليل هو بوصلتك المرجعية، يجمع لك خلاصة تجارب وخبرات مؤسسي شركات ناجحة، وينظمها في مسار منطقي ومتسلسل. نهدف إلى تزويدك بالأساسيات التي تحتاجها لاتخاذ قرارات أفضل، وتجنب الأخطاء الشائعة، وبناء مشروع مستدام وقادر على النمو.</p>
            </section>

            <section id="business-clinic" class="mb-16 sm:mb-20">
                <div class="card bg-indigo-50 border-l-4 border-indigo-500">
                    <h2 class="text-2xl md:text-3xl font-bold mt-0 mb-6 text-center text-indigo-800">🩺 عيادة الأعمال</h2>
                    <p class="text-center text-gray-600 mb-6">هل لديك فكرة مشروع ولكن لا تعرف من أين تبدأ؟ صف فكرتك أو المجال الذي تهتم به، وسيقوم مستشارنا الذكي بوضع خارطة طريق مخصصة لك تحتوي على أهم الخطوات العملية للبدء.</p>
                    <div class="max-w-xl mx-auto">
                        <textarea id="clinic-input" placeholder="مثال: أريد أن أبدأ مشروع متجر إلكتروني متخصص في بيع القهوة المختصة..." class="w-full p-3 border border-gray-300 rounded-md mb-4" rows="4"></textarea>
                        <button id="generate-roadmap-btn" class="w-full py-3 px-5 bg-indigo-600 text-white rounded-lg shadow hover:bg-indigo-700 transition">🚀 أنشئ خارطة الطريق الخاصة بي</button>
                    </div>
                    <div id="clinic-container" class="mt-6 p-4 bg-white rounded-lg min-h-[100px] relative">
                        <p class="text-center text-gray-500">ستظهر خارطة الطريق هنا...</p>
                    </div>
                </div>
            </section>
            
            <section id="chapter1" class="mb-16 sm:mb-20">
                <h2 class="text-2xl md:text-3xl font-bold mb-6">الفصل الأول: من الفكرة إلى نموذج العمل</h2>
                <p class="text-base sm:text-lg text-gray-700 mb-8">قبل كتابة أي سطر برمجي أو إنفاق أي ريال، يجب أن تبني أساساً صلباً لفكرتك.</p>

                <h3 class="text-xl md:text-2xl font-bold mt-8 mb-4">المبدأ الأول: لا تبحث عن فكرة، بل ابحث عن مشكلة</h3>
                <p>أفضل الشركات التقنية لم تبدأ بـ "فكرة عبقرية"، بل بدأت من مشكلة حقيقية ومؤلمة يعاني منها شريحة من الناس.</p>
                <ul class="list-disc mr-6 mt-4 space-y-2 text-gray-700">
                    <li><b>حل مشكلة عشتها بنفسك:</b> هذا هو المصدر الذهبي للأفكار، لأنك تفهم المشكلة بعمق وشغوف بحلها.</li>
                    <li><b>راقب محيطك:</b> ما هي الصعوبات التي تواجه أصدقاءك أو الشركات من حولك؟ ما الذي يستهلك وقتهم أو مالهم بشكل غير فعال؟</li>
                    <li><b>تحدث مع الناس:</b> لا تسألهم "ماذا تريدون؟"، بل اسألهم عن مشاكلهم: "ما هو أصعب جزء في يومك/عملك؟". استمع أكثر مما تتكلم.</li>
                </ul>

                <h3 class="text-xl md:text-2xl font-bold mt-8 mb-4">المبدأ الثاني: اشرح مشروعك في سطر واحد</h3>
                <p>إذا لم تستطع شرح مشروعك في جملة واحدة واضحة، فأنت لم تفهمه بعد بما يكفي. ستحتاج إلى هذه الجملة لشرح مشروعك لكل من تقابله: عميل، مستثمر، شريك، أو موظف.</p>
                <div class="mt-4 p-4 bg-gray-100 rounded-lg border-r-4 border-gray-300">
                    <p class="font-bold">المعادلة البسيطة: شركتنا [اسم الشركة] تساعد [الشريحة المستهدفة] على تحقيق [النتيجة المرجوة] من خلال [الحل أو الميزة الفريدة].</p>
                    <p class="mt-2 text-sm sm:text-base"><b>مثال تطبيقي:</b> "منصة iSchool تساعد الأطفال من سن 6 إلى 18 سنة على بناء مستقبلهم في مجال التكنولوجيا من خلال تدريبات برمجة مباشرة وتفاعلية أونلاين."</p>
                </div>

                <h3 class="text-xl md:text-2xl font-bold mt-8 mb-4">المبدأ الثالث: ارسم نموذج عملك (Business Model Canvas)</h3>
                <p>قبل بناء خطة عمل مفصلة، استخدم "مخطط نموذج العمل" لتوضيح أركان مشروعك الأساسية على ورقة واحدة. هذا المخطط يجبرك على التفكير في كيفية خلق القيمة وتقديمها وتحقيق الأرباح.</p>
                <p class="font-bold mt-4">أهم ٩ عناصر في المخطط:</p>
                <ol class="list-decimal mr-6 mt-2 space-y-2 text-gray-700">
                    <li><b>شرائح العملاء:</b> من هم عملاؤك؟</li>
                    <li><b>القيمة المقترحة:</b> ما المشكلة التي تحلها لهم؟</li>
                    <li><b>القنوات:</b> كيف ستصل إلى عملائك؟</li>
                    <li><b>علاقات العملاء:</b> كيف ستتفاعل معهم؟</li>
                    <li><b>مصادر الإيرادات:</b> كيف ستجني المال؟</li>
                    <li><b>الموارد الرئيسية:</b> ما الأصول التي تحتاجها؟ (فريق، تقنية)</li>
                    <li><b>الأنشطة الرئيسية:</b> ما أهم شيء ستفعله؟ (تطوير، تسويق)</li>
                    <li><b>الشركاء الرئيسيون:</b> من سيساعدك على النجاح؟</li>
                    <li><b>هيكل التكاليف:</b> ما هي أكبر مصاريفك؟</li>
                </ol>

                <h3 class="text-xl md:text-2xl font-bold mt-8 mb-4">المبدأ الرابع: تحقق من فكرتك (Prototype vs. MVP)</h3>
                <p>الفرق بينهما جوهري لتجنب إهدار الوقت والمال.</p>
                <div class="overflow-x-auto mt-4">
                    <table class="w-full text-sm text-left text-gray-500">
                        <thead class="text-xs text-gray-700 uppercase bg-gray-100">
                            <tr>
                                <th scope="col" class="px-6 py-3">الميزة</th>
                                <th scope="col" class="px-6 py-3">النموذج الأولي (Prototype)</th>
                                <th scope="col" class="px-6 py-3">المنتج الأولي القابل للتطبيق (MVP)</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="bg-white border-b"><td class="px-6 py-4 font-medium">ما هو؟</td><td class="px-6 py-4">نموذج بصري أو تفاعلي لشرح الفكرة، قد لا يكون وظيفيًا.</td><td class="px-6 py-4">نسخة عاملة من المنتج تحتوي على الميزة الأساسية فقط التي تحل المشكلة.</td></tr>
                            <tr class="bg-gray-50 border-b"><td class="px-6 py-4 font-medium">الهدف؟</td><td class="px-6 py-4">توضيح الفكرة داخليًا للفريق أو المستثمرين.</td><td class="px-6 py-4">اختبار الفكرة في السوق مع مستخدمين حقيقيين وجمع بيانات.</td></tr>
                            <tr class="bg-white border-b"><td class="px-6 py-4 font-medium">السؤال؟</td><td class="px-6 py-4">"هل يمكننا بناء هذا؟"</td><td class="px-6 py-4">"هل يجب علينا بناء هذا؟ وهل هناك من سيدفع مقابله؟"</td></tr>
                        </tbody>
                    </table>
                </div>

                <div class="card mt-12">
                    <h3 class="text-xl md:text-2xl font-bold mt-0 mb-6 text-center accent-color">✨ مختبر الأفكار الاستراتيجي</h3>
                    <p class="text-center text-gray-600 mb-4">أدخل وصفًا لمشروعك، ثم استخدم الأدوات أدناه لتحليله من زوايا مختلفة.</p>
                    <textarea id="idea-input" placeholder="مثال: منصة تربط بين المزارعين المحليين والمطاعم مباشرة..." class="w-full p-3 border border-gray-300 rounded-md mb-4" rows="4"></textarea>
                    <div class="grid grid-cols-1 sm:grid-cols-3 gap-2">
                        <button id="analyze-idea-btn" class="w-full py-2.5 px-4 bg-blue-600 text-white rounded-lg shadow hover:bg-blue-700 transition">📝 حلل نموذج العمل</button>
                        <button id="analyze-competitors-btn" class="w-full py-2.5 px-4 bg-green-600 text-white rounded-lg shadow hover:bg-green-700 transition">🔭 حلل المنافسين</button>
                        <button id="analyze-ocean-btn" class="w-full py-2.5 px-4 bg-purple-600 text-white rounded-lg shadow hover:bg-purple-700 transition">🌊 حلل المحيط</button>
                    </div>
                    <div id="idea-interaction-container" class="mt-6 p-4 bg-gray-50 rounded-lg min-h-[100px] relative">
                        <p class="text-center text-gray-500">ستظهر النتائج هنا...</p>
                    </div>
                </div>
            </section>

            <!-- Other sections follow the same responsive pattern -->
            <section id="chapter2" class="mb-16 sm:mb-20">
                <h2 class="text-2xl md:text-3xl font-bold mb-6">الفصل الثاني: بناء الفريق وتأسيس الشركة</h2>
                <p class="text-base sm:text-lg text-gray-700 mb-8">فكرتك لا تساوي شيئاً بدون فريق قادر على تنفيذها.</p>
                <h3 class="text-xl md:text-2xl font-bold mt-8 mb-4">اختيار الشريك المؤسس: القرار الأهم</h3>
                <ul class="list-disc mr-6 mt-4 space-y-2 text-gray-700">
                    <li>تثق به ثقة عمياء.</li>
                    <li>يمتلك مهارات تكمّل مهاراتك (مثال: شريك تقني وآخر في إدارة الأعمال).</li>
                    <li>يتمتع بنفس أخلاقيات العمل والالتزام.</li>
                    <li>قادر على التواصل بصدق وتقبّل النقد.</li>
                </ul>
                <div class="card mt-12">
                    <h3 class="text-xl md:text-2xl font-bold mt-0 mb-6 text-center accent-color">✨ مساعد التوظيف الذكي</h3>
                    <p class="text-center text-gray-600 mb-6">أدخل المسمى الوظيفي، وسيقوم الذكاء الاصطناعي بتوليد أسئلة مقابلة.</p>
                    <div class="max-w-lg mx-auto">
                        <input id="job-role-input" type="text" placeholder="مثال: مدير تسويق رقمي" class="w-full p-3 border border-gray-300 rounded-md mb-4">
                        <button id="generate-questions-btn" class="w-full py-3 px-5 bg-accent-color text-white rounded-lg shadow hover:bg-blue-700 transition">✨ جهّز أسئلة المقابلة</button>
                    </div>
                    <div id="hiring-interaction-container" class="mt-6 p-4 bg-gray-50 rounded-lg min-h-[100px] relative">
                        <p class="text-center text-gray-500">ستظهر النتائج هنا...</p>
                    </div>
                </div>
            </section>

            <section id="chapter3" class="mb-16 sm:mb-20">
                <h2 class="text-2xl md:text-3xl font-bold mb-6">الفصل الثالث: التمويل والجولات الاستثمارية</h2>
                <p class="text-base sm:text-lg text-gray-700 mb-8">التمويل هو الأكسجين الذي يسمح لشركتك بالنمو، لكنه ليس الهدف بحد ذاته.</p>
                <div class="card my-8">
                     <h4 class="text-lg sm:text-xl font-bold mb-6 text-center">توجهات الاستثمار الجريء في المنطقة</h4>
                     <div class="text-center mb-6 flex flex-wrap justify-center gap-2">
                        <button id="show-countries-btn" class="py-2 px-5 bg-accent-color text-white rounded-lg shadow">الدول</button>
                        <button id="show-sectors-btn" class="py-2 px-5 bg-gray-200 text-gray-800 rounded-lg">القطاعات</button>
                     </div>
                     <div class="relative h-80 sm:h-96 w-full max-w-3xl mx-auto"><canvas id="investmentChart"></canvas></div>
                </div>
                <div class="card mt-12">
                    <h3 class="text-xl md:text-2xl font-bold mt-0 mb-6 text-center accent-color">✨ مساعد المستثمرين الذكي</h3>
                    <p class="text-center text-gray-600 mb-6">استخدم هذه الأدوات للتحضير لجولاتك الاستثمارية.</p>
                    <div class="grid md:grid-cols-2 gap-8">
                        <div>
                            <h4 class="text-lg sm:text-xl font-bold mb-3">مدرب العرض التقديمي (Pitch)</h4>
                            <textarea id="pitch-input" placeholder="اكتب هنا العرض التقديمي المصعد لمشروعك..." class="w-full p-3 border border-gray-300 rounded-md mb-4" rows="4"></textarea>
                            <button id="generate-pitch-feedback-btn" class="w-full py-3 px-5 bg-blue-600 text-white rounded-lg shadow hover:bg-blue-700 transition">✨ قيّم العرض</button>
                        </div>
                        <div>
                            <h4 class="text-lg sm:text-xl font-bold mb-3">منشئ شخصية المستثمر</h4>
                            <input id="investor-type-input" placeholder="صف نوع المستثمر الذي تستهدفه..." class="w-full p-3 border border-gray-300 rounded-md mb-4">
                            <button id="generate-investor-persona-btn" class="w-full py-3 px-5 bg-green-600 text-white rounded-lg shadow hover:bg-green-700 transition">✨ ابنِ شخصية المستثمر</button>
                        </div>
                    </div>
                    <div id="investor-interaction-container" class="mt-6 p-4 bg-gray-50 rounded-lg min-h-[100px] relative">
                        <p class="text-center text-gray-500">ستظهر النتائج هنا...</p>
                    </div>
                </div>
            </section>

            <section id="chapter4" class="mb-16 sm:mb-20">
                <h2 class="text-2xl md:text-3xl font-bold mb-6">الفصل الرابع: من المنتج إلى السوق</h2>
                 <div class="card mt-12">
                    <h3 class="text-xl md:text-2xl font-bold mt-0 mb-6 text-center accent-color">✨ حاسبة ومستشار LTV/CAC</h3>
                    <p class="text-center text-gray-600 mb-6">أدخل أرقامك، وسيقوم الذكاء الاصطناعي بتحليل نموذج عملك وتقديم نصائح.</p>
                    <div class="grid sm:grid-cols-3 gap-4 max-w-2xl mx-auto">
                        <div>
                            <label for="arpu-input" class="block text-sm font-medium text-gray-700">متوسط الإيراد الشهري للعميل (بالريال)</label>
                            <input id="arpu-input" type="number" placeholder="100" class="mt-1 block w-full p-3 border border-gray-300 rounded-md">
                        </div>
                        <div>
                            <label for="lifetime-input" class="block text-sm font-medium text-gray-700">متوسط عمر العميل (بالأشهر)</label>
                            <input id="lifetime-input" type="number" placeholder="12" class="mt-1 block w-full p-3 border border-gray-300 rounded-md">
                        </div>
                        <div>
                            <label for="cac-input" class="block text-sm font-medium text-gray-700">تكلفة اكتساب العميل (بالريال)</label>
                            <input id="cac-input" type="number" placeholder="100" class="mt-1 block w-full p-3 border border-gray-300 rounded-md">
                        </div>
                    </div>
                    <div class="text-center mt-6">
                        <button id="calculate-ltv-cac-btn" class="py-3 px-8 bg-accent-color text-white rounded-lg shadow hover:bg-blue-700 transition">📈 حلل النسبة وقدم نصيحة</button>
                    </div>
                    <div id="ltv-cac-container" class="mt-6 p-4 bg-gray-50 rounded-lg min-h-[100px] relative">
                        <p class="text-center text-gray-500">ستظهر النتائج هنا...</p>
                    </div>
                </div>
            </section>

            <section id="chapter5" class="mb-16 sm:mb-20">
                <h2 class="text-2xl md:text-3xl font-bold mb-6">الفصل الخامس: القيادة والنمو المستدام</h2>
                <div class="card mt-12">
                    <h3 class="text-xl md:text-2xl font-bold mt-0 mb-6 text-center accent-color">✨ مستشار القرارات الصعبة</h3>
                    <p class="text-center text-gray-600 mb-6">صف قرارًا صعبًا تواجهك، وسيساعدك الذكاء الاصطناعي على تحليله.</p>
                    <div class="max-w-lg mx-auto">
                        <textarea id="leadership-challenge-input" placeholder="مثال: أحد الموظفين أداؤه منخفض..." class="w-full p-3 border border-gray-300 rounded-md mb-4" rows="3"></textarea>
                        <button id="generate-leadership-advice-btn" class="w-full py-3 px-5 bg-accent-color text-white rounded-lg shadow hover:bg-blue-700 transition">✨ ساعدني في اتخاذ القرار</button>
                    </div>
                    <div id="leadership-advice-container" class="mt-6 p-4 bg-gray-50 rounded-lg min-h-[100px] relative">
                        <p class="text-center text-gray-500">ستظهر النتائج هنا...</p>
                    </div>
                </div>
            </section>

            <section id="chapter6" class="mb-16 sm:mb-20">
                <h2 class="text-2xl md:text-3xl font-bold mb-6">الفصل السادس: صندوق الأدوات والمصادر</h2>
                <div class="card mt-8">
                    <h3 class="text-xl md:text-2xl font-bold mt-0 mb-6 text-center text-red-700">🚨 محلل مخاطر الفشل</h3>
                    <p class="text-center text-gray-600 mb-6">أدخل وصف مشروعك لتعرف أهم المخاطر التي قد تواجهك.</p>
                    <div class="max-w-xl mx-auto">
                        <textarea id="failure-analysis-input" placeholder="صف فكرة مشروعك هنا..." class="w-full p-3 border border-gray-300 rounded-md mb-4" rows="4"></textarea>
                        <button id="analyze-failure-risks-btn" class="w-full py-3 px-5 bg-red-600 text-white rounded-lg shadow hover:bg-red-700 transition">🚨 حلل مخاطر الفشل</button>
                    </div>
                    <div id="failure-analysis-container" class="mt-6 p-4 bg-gray-50 rounded-lg min-h-[100px] relative">
                        <p class="text-center text-gray-500">ستظهر النتائج هنا...</p>
                    </div>
                </div>
                 <div class="card mt-8">
                    <h3 class="text-xl md:text-2xl font-bold mt-0 mb-6 text-center accent-color">✨ خبير الأدوات</h3>
                    <p class="text-center text-gray-600 mb-6">ما هي المهمة التي تريد إنجازها؟ سيقترح عليك الذكاء الاصطناعي أفضل أداة لها.</p>
                    <div class="max-w-lg mx-auto">
                        <input id="tool-task-input" type="text" placeholder="مثال: أحتاج أداة مجانية لعمل استبيانات" class="w-full p-3 border border-gray-300 rounded-md mb-4">
                        <button id="generate-tool-recommendation-btn" class="w-full py-3 px-5 bg-accent-color text-white rounded-lg shadow hover:bg-blue-700 transition">✨ أوصني بأداة</button>
                    </div>
                    <div id="tool-recommendation-container" class="mt-6 p-4 bg-gray-50 rounded-lg min-h-[100px] relative">
                        <p class="text-center text-gray-500">ستظهر النتائج هنا...</p>
                    </div>
                </div>
            </section>
            
            <section id="appendix" class="mb-16 sm:mb-20">
                <h2 class="text-2xl md:text-3xl font-bold mb-6">ملحق: لماذا نفقد الشغف في العمل؟</h2>
                <div class="my-8">
                    <h3 class="text-xl text-center">🔟 أسباب تجعل الموظف يفقد شغفه في الشغل…</h3>
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-6 mt-6">
                        <div class="p-4 bg-amber-50 border-r-4 border-amber-400 rounded-lg"><h4 class="font-bold text-amber-800">١- مافي تقدير</h4><p class="mt-1 text-gray-700">يشتغل من قلبه، يعطي فوق طاقته، بس ما يسمع “يعطيك العافية” ولا حتى شكرًا.</p></div>
                        <div class="p-4 bg-amber-50 border-r-4 border-amber-400 rounded-lg"><h4 class="font-bold text-amber-800">٢- مافي رؤية واضحة</h4><p class="mt-1 text-gray-700">ليش نشتغل؟ شنو الهدف؟ وين بنوصل؟ … إذا ما عرفنا الجواب، الحماس يضيع.</p></div>
                        <div class="p-4 bg-amber-50 border-r-4 border-amber-400 rounded-lg"><h4 class="font-bold text-amber-800">٣- المدير المتسلط</h4><p class="mt-1 text-gray-700">إذا كل شي يصير أوامر بدون نقاش، تحس إنك آلة مب إنسان.</p></div>
                        <div class="p-4 bg-amber-50 border-r-4 border-amber-400 rounded-lg"><h4 class="font-bold text-amber-800">٤- وعود تنقال وما تنفذ</h4><p class="mt-1 text-gray-700">مرّة، مرتين مثل الترقيات … بعدين الشخص ما عاد يصدق أي كلمة.</p></div>
                        <div class="p-4 bg-amber-50 border-r-4 border-amber-400 rounded-lg"><h4 class="font-bold text-amber-800">٥- مافي فرص تطور</h4><p class="mt-1 text-gray-700">نفس الشغل، نفس المكان، نفس الراتب… والكل يتطور إلا أنا؟ طبيعي أحبط.</p></div>
                        <div class="p-4 bg-amber-50 border-r-4 border-amber-400 rounded-lg"><h4 class="font-bold text-amber-800">٦- بيئة مليئة باللوم والخوف</h4><p class="mt-1 text-gray-700">كل غلطة تصير فيلم رعب؟ من بيتجرأ يبدع؟</p></div>
                        <div class="p-4 bg-amber-50 border-r-4 border-amber-400 rounded-lg"><h4 class="font-bold text-amber-800">٧- مافي تنظيم</h4><p class="mt-1 text-gray-700">كل يوم قرار جديد ومافي خطة، ما تعرف وين رايح… يصير الشغل عشوائي مب تحدي.</p></div>
                        <div class="p-4 bg-amber-50 border-r-4 border-amber-400 rounded-lg"><h4 class="font-bold text-amber-800">٨- العدل مفقود</h4><p class="mt-1 text-gray-700">اللي يشتغل بضمير ما ينشاف، واللي عنده واسطة أو من ربع المجلس يترقى؟ كيف تبيني أتحمس؟</p></div>
                        <div class="p-4 bg-amber-50 border-r-4 border-amber-400 rounded-lg"><h4 class="font-bold text-amber-800">٩- مافي حد يسمعك</h4><p class="mt-1 text-gray-700">تبغي تقول شي، عندك فكرة، عندك مشكلة… بس محد فاضي يسمع لك؟!</p></div>
                        <div class="p-4 bg-amber-50 border-r-4 border-amber-400 rounded-lg"><h4 class="font-bold text-amber-800">١٠- صحة الموظف النفسية ما تنحسب</h4><p class="mt-1 text-gray-700">اللي يشتغل وهو تعبان من جو الشركة… ما يطول فيها، لو كان معاشه عالي.</p></div>
                    </div>
                    <p class="mt-8 text-center text-lg font-semibold text-gray-800 bg-gray-100 p-4 rounded-lg">بيئة العمل إما ترفعك… أو تكسر المنظومة، فخلونا نبني بيئة نحب نروح لها كل صبح ❤️</p>
                </div>
            </section>
        </div>
    </main>

<script>
document.addEventListener('DOMContentLoaded', function () {
    // --- Mobile Navigation & Page Setup ---
    const setupPage = () => {
        const sections = document.querySelectorAll('section');
        const navLinks = document.querySelectorAll('.nav-link');
        const sidebar = document.getElementById('sidebar');
        const menuToggle = document.getElementById('menu-toggle');
        const closeMenuBtn = document.getElementById('close-menu-btn');
        const overlay = document.getElementById('overlay');

        const toggleMenu = () => {
            const isVisible = !sidebar.classList.contains('translate-x-full');
            sidebar.classList.toggle('translate-x-full', isVisible);
            sidebar.classList.toggle('translate-x-0', !isVisible);
            overlay.classList.toggle('hidden', isVisible);
            overlay.classList.toggle('opacity-50', !isVisible);
            overlay.classList.toggle('opacity-0', isVisible);
        };

        menuToggle.addEventListener('click', toggleMenu);
        closeMenuBtn.addEventListener('click', toggleMenu);
        overlay.addEventListener('click', toggleMenu);
        
        navLinks.forEach(link => {
            link.addEventListener('click', () => {
                if (window.innerWidth < 768) {
                    toggleMenu();
                }
            });
        });

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    navLinks.forEach(link => {
                        link.classList.remove('active');
                        if (link.getAttribute('href').substring(1) === entry.target.id) {
                            link.classList.add('active');
                        }
                    });
                }
            });
        }, { root: null, rootMargin: '0px', threshold: 0.1 });
        sections.forEach(section => observer.observe(section));
    };

    // --- Chart.js Setup ---
    const setupChart = () => {
        const investmentData = {
            countries: { labels: ['السعودية', 'الإمارات', 'مصر'], data: [52, 22, 18], title: 'نسبة التمويل (%)' },
            sectors: { labels: ['التقنية المالية', 'التجارة الإلكترونية', 'الخدمات اللوجستية'], data: [21, 15, 9], title: 'نسبة التمويل (%)' }
        };
        const ctx = document.getElementById('investmentChart')?.getContext('2d');
        if (!ctx) return;
        const investmentChart = new Chart(ctx, { type: 'bar', data: { labels: investmentData.countries.labels, datasets: [{ label: investmentData.countries.title, data: investmentData.countries.data, backgroundColor: '#2563EB', borderRadius: 5 }] }, options: { responsive: true, maintainAspectRatio: false, indexAxis: 'y', scales: { x: { beginAtZero: true, title: { display: true, text: 'نسبة التمويل الجريء (%)' } } }, plugins: { legend: { display: false } } } });
        const countriesBtn = document.getElementById('show-countries-btn');
        const sectorsBtn = document.getElementById('show-sectors-btn');
        const updateChart = (type) => {
            const d = investmentData[type];
            investmentChart.data.labels = d.labels;
            investmentChart.data.datasets[0].data = d.data;
            investmentChart.update();
            countriesBtn.classList.toggle('bg-accent-color', type === 'countries');
            countriesBtn.classList.toggle('text-white', type === 'countries');
            countriesBtn.classList.toggle('bg-gray-200', type !== 'countries');
            sectorsBtn.classList.toggle('bg-accent-color', type === 'sectors');
            sectorsBtn.classList.toggle('text-white', type === 'sectors');
            sectorsBtn.classList.toggle('bg-gray-200', type !== 'sectors');
        };
        countriesBtn.addEventListener('click', () => updateChart('countries'));
        sectorsBtn.addEventListener('click', () => updateChart('sectors'));
    };

    // --- Gemini API & Helper Logic ---
    const formatResponse = (text) => {
        let formattedText = text
            .replace(/\*\*(.*?)\*\*/g, '<h4>$1</h4>')
            .replace(/\* (.*?)(?:\n|\r\n|$)/g, '<li>$1</li>')
            .replace(/(\r\n|\n|\r)/g, "<br>");
        return formattedText.replace(/(<li>.*?<\/li>)/gs, '<ul>$1</ul>').replace(/<\/ul><br><ul>/g, '');
    };

    const callGeminiAPI = async (history) => {
        const payload = { contents: history };
        // IMPORTANT: Do not hardcode API keys in production. 
        // This key is for demonstration. Use environment variables or a secure key management system.
        const apiKey = ""; 
        const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;
        try {
            const response = await fetch(apiUrl, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(payload) });
            const result = await response.json();
            if (result.candidates && result.candidates.length > 0 && result.candidates[0].content && result.candidates[0].content.parts && result.candidates[0].content.parts.length > 0) {
                 return result.candidates[0].content.parts[0].text;
            } else {
                console.error('Gemini API Error:', result);
                const errorMessage = result?.error?.message || 'لا توجد رسالة خطأ';
                return `عذرًا، حدث خطأ في واجهة برمجة التطبيقات. (${errorMessage})`;
            }
        } catch (error) {
            console.error('Gemini API call failed:', error);
            return 'لا يمكن الوصول إلى الخدمة حاليًا. يرجى التحقق من اتصالك بالإنترنت.';
        }
    };

    const copyToClipboard = (text, buttonElement) => {
        const textarea = document.createElement('textarea');
        textarea.value = text;
        textarea.style.position = 'absolute';
        textarea.style.left = '-9999px';
        document.body.appendChild(textarea);
        textarea.select();
        try {
            document.execCommand('copy');
            if(buttonElement) {
                buttonElement.textContent = 'تم النسخ!';
                setTimeout(() => {
                    buttonElement.textContent = 'نسخ';
                }, 2000);
            }
        } catch (err) {
            console.error('Failed to copy text: ', err);
        }
        document.body.removeChild(textarea);
    };

    const displayAIResult = (container, content) => {
        const finalHtml = `
            <button class="copy-btn">نسخ</button>
            <div class="gemini-result text-right">${formatResponse(content)}</div>
        `;
        container.innerHTML = finalHtml;
        container.querySelector('.copy-btn').addEventListener('click', (e) => {
            const textToCopy = container.querySelector('.gemini-result').innerText;
            copyToClipboard(textToCopy, e.target);
        });
    };
    
    // --- AI Feature Handlers ---
    const setupSimpleAIFeature = (buttonId, inputId, containerId, promptGenerator) => {
        const button = document.getElementById(buttonId);
        if (!button) return;
        button.addEventListener('click', async () => {
            const inputElement = document.getElementById(inputId);
            const container = document.getElementById(containerId);
            if (!inputElement.value.trim()) {
                container.innerHTML = `<p class="text-red-500 text-center">يرجى ملء حقل الوصف أولاً.</p>`;
                return;
            }
            container.innerHTML = '<div class="loader"></div>';
            const prompt = promptGenerator(inputElement.value);
            const response = await callGeminiAPI([{ role: 'user', parts: [{ text: prompt }] }]);
            displayAIResult(container, response);
        });
    };

    const setupAIEventListeners = () => {
        setupSimpleAIFeature('generate-roadmap-btn', 'clinic-input', 'clinic-container', (idea) => `بصفتك مستشارًا في 'عيادة الأعمال'، استلمت الوصف التالي لفكرة مشروع: "${idea}". قم بإنشاء 'خارطة طريق مخصصة' للبدء. يجب أن تتضمن الخارطة 3 إلى 5 خطوات رئيسية وعملية. لكل خطوة، اذكر: **عنوان الخطوة**، و **شرح موجز** لما يجب فعله، و **مهمة واحدة قابلة للتنفيذ** يمكن للمؤسس البدء بها فورًا. قدم الإجابة بتنسيق واضح ومنظم.`);
        setupSimpleAIFeature('analyze-idea-btn', 'idea-input', 'idea-interaction-container', (idea) => `بصفتك مستشارًا للمشاريع الناشئة، قم بتحليل فكرة المشروع التالية: "${idea}". قيم الفكرة بناءً على نموذج العمل (العملاء، القيمة، القنوات، الإيرادات). قدم تحليلًا موجزًا لكل نقطة.`);
        setupSimpleAIFeature('analyze-competitors-btn', 'idea-input', 'idea-interaction-container', (idea) => `بصفتك محلل سوق استراتيجي، قم بتحليل المنافسين المحتملين لفكرة المشروع التالية: "${idea}". حدد 3 منافسين محتملين. لكل منافس، اذكر: **نقطة قوة رئيسية** و **نقطة ضعف رئيسية**. واختتم بنصيحة لكيفية التميز.`);
        setupSimpleAIFeature('analyze-ocean-btn', 'idea-input', 'idea-interaction-container', (idea) => `بصفتك خبير استراتيجيات أعمال متخصص في استراتيجية المحيط الأزرق، قم بتحليل فكرة المشروع التالية: '${idea}'. بناءً على التحليل، صنف الفكرة ضمن أحد المحيطات التالية: - **المحيط الأحمر:** سوق حالي شديد التنافسية. - **المحيط الأزرق:** سوق جديد غير مستغل. - **المحيط الأخضر:** سوق ناشئ أو متخصص (نيتش). يجب أن تحتوي إجابتك على: **التصنيف**، **شرح السبب**، **مستوى المخاطرة والفرصة**، و **نصيحة استراتيجية**.`);
        setupSimpleAIFeature('generate-questions-btn', 'job-role-input', 'hiring-interaction-container', (jobRole) => `بصفتك مدير توظيف خبير، قم بتوليد 4 أسئلة مقابلة سلوكية وموقفية لدور "${jobRole}". لكل سؤال، قدم شرحًا موجزًا عن الهدف منه.`);
        setupSimpleAIFeature('generate-pitch-feedback-btn', 'pitch-input', 'investor-interaction-container', (pitch) => `هذا هو العرض التقديمي المصعد لمشروعي: "${pitch}". بصفتك مستثمرًا جريئًا، قدم لي 3 نقاط قوة و 3 اقتراحات للتحسين.`);
        setupSimpleAIFeature('generate-investor-persona-btn', 'investor-type-input', 'investor-interaction-container', (type) => `بصفتك خبيرًا في علاقات المستثمرين، أنشئ "شخصية مستثمر" مفصلة للنوع التالي: "${type}". يجب أن تتضمن الشخصية: **الأطروحة الاستثمارية**، **الأسئلة المفضلة**، و **العلامات الحمراء**.`);
        
        document.getElementById('calculate-ltv-cac-btn')?.addEventListener('click', async () => {
            const arpu = parseFloat(document.getElementById('arpu-input').value);
            const lifetime = parseFloat(document.getElementById('lifetime-input').value);
            const cac = parseFloat(document.getElementById('cac-input').value);
            const container = document.getElementById('ltv-cac-container');
            if (isNaN(arpu) || isNaN(lifetime) || isNaN(cac)) {
                container.innerHTML = `<p class="text-red-500 text-center">يرجى إدخال قيم رقمية صحيحة.</p>`;
                return;
            }
            container.innerHTML = '<div class="loader"></div>';
            const ltv = arpu * lifetime;
            const ratio = cac > 0 ? (ltv / cac).toFixed(2) : '∞';
            const prompt = `بصفتك مستشارًا ماليًا للشركات الناشئة، قم بتحليل الأرقام التالية: LTV = ${ltv.toFixed(2)} ريال, CAC = ${cac.toFixed(2)} ريال, LTV:CAC Ratio = ${ratio}. 1. قدم تحليلًا موجزًا لصحة هذا النموذج. 2. اقترح استراتيجية لزيادة LTV. 3. اقترح استراتيجية لتقليل CAC. قدم الإجابة بتنسيق واضح.`;
            const response = await callGeminiAPI([{ role: 'user', parts: [{ text: prompt }] }]);
            const resultHtml = `<div class="text-center mb-4"><p class="text-lg">القيمة الدائمة للعميل (LTV): <span class="font-bold text-green-600">${ltv.toFixed(2)} ريال</span></p><p class="text-lg">نسبة LTV إلى CAC هي: <span class="font-bold text-blue-600">${ratio}</span></p></div><hr class="my-4"><div class="gemini-result text-right">${formatResponse(response)}</div>`;
            container.innerHTML = `<button class="copy-btn">نسخ</button><div class="ltv-cac-result">${resultHtml}</div>`;
            container.querySelector('.copy-btn').addEventListener('click', (e) => copyToClipboard(container.querySelector('.ltv-cac-result').innerText, e.target));
        });

        setupSimpleAIFeature('generate-leadership-advice-btn', 'leadership-challenge-input', 'leadership-advice-container', (challenge) => `بصفتي قائد فريق، أواجه هذا الموقف: "${challenge}". طبق "نموذج GROW" على هذا الموقف وقدم لي سؤالاً واحدًا لكل مرحلة (Goal, Reality, Options, Way Forward) لمساعدتي على التفكير في الحل.`);
        setupSimpleAIFeature('analyze-failure-risks-btn', 'failure-analysis-input', 'failure-analysis-container', (idea) => `بصفتك محلل مخاطر خبير، بناءً على وصف المشروع التالي: "${idea}", حدد أهم 3 مخاطر فشل محتملة. لكل خطر، قدم: 1. **الخطر**. 2. **لماذا ينطبق؟**. 3. **سؤال وقائي**.`);
        setupSimpleAIFeature('generate-tool-recommendation-btn', 'tool-task-input', 'tool-recommendation-container', (task) => `أحتاج إلى أداة من أجل: "${task}". اقترح أداة واحدة مجانية وأداة واحدة مدفوعة، مع ذكر ميزة رئيسية لكل منهما.`);
    };

    // --- Initialize App ---
    setupPage();
    setupChart();
    setupAIEventListeners();
});
</script>

</body>
</html>
